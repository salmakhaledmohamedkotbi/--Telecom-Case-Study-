CREATE TABLE YOUSSEF.CHANNEL_DIM
(
  CHANNEL_KEY   NUMBER,
  CHANNEL_ID    NUMBER,
  CHANNEL_TYPE  VARCHAR2(250 BYTE),
  PRIMARY KEY
 (CHANNEL_KEY)
)

(
  CLASS_KEY                   INTEGER,
  CLASS_ID                    NUMBER(10),
  CLASS_DESC                  VARCHAR2(1000 BYTE),
  BOUGHT_FAREBASIS            VARCHAR2(50 BYTE),
  UPGRADE_FAREBASIS           VARCHAR2(50 BYTE),
  UPGRADE_STATUS              VARCHAR2(20 BYTE),
  FLYER_MILES_PER_MILE_FLOWN  NUMBER(3,2),
  PRIMARY KEY
 (CLASS_KEY)
)

CREATE TABLE YOUSSEF.CUSTOMER_CARE_FACT
(
  FLIGHT_KEY          INTEGER,
  REPRESENTITIVE_KEY  INTEGER,
  INTERACTION_KEY     INTEGER,
  REPORT_KEY          INTEGER,
  FLYER_KEY           INTEGER,
  DATE_KEY            INTEGER,
  RATING              INTEGER,
  MEMBERSHIP_KEY      INTEGER,
  CONSTRAINT FK_MEMBERSHIP 
 FOREIGN KEY (MEMBERSHIP_KEY) 
 REFERENCES YOUSSEF.MEMBERSHIP_DIM (MEMBERSHIP_KEY),
  FOREIGN KEY (FLIGHT_KEY) 
 REFERENCES YOUSSEF.FLIGHT_DIM (FLIGHT_KEY),
  FOREIGN KEY (REPRESENTITIVE_KEY) 
 REFERENCES YOUSSEF.CUSTOMER_REPRESENTATIVE_DIM (REPRESENTATIVE_KEY),
  FOREIGN KEY (INTERACTION_KEY) 
 REFERENCES YOUSSEF.INTERACTION_TYPE_DIM (INTERACTION_KEY),
  FOREIGN KEY (REPORT_KEY) 
 REFERENCES YOUSSEF.REPORT_DIM (REPORT_KEY),
  FOREIGN KEY (FLYER_KEY) 
 REFERENCES YOUSSEF.FLYERS_DIM (FLYER_KEY),
  FOREIGN KEY (DATE_KEY) 
 REFERENCES YOUSSEF.DATE_DIM (DATE_KEY)
)

CREATE TABLE YOUSSEF.CUSTOMER_REPRESENTATIVE_DIM
(
  REPRESENTATIVE_KEY      NUMBER,
  REPRESENTATIVE_ID       NUMBER,
  REPRESENTATIVE_NAME     VARCHAR2(50 BYTE),
  REPRESENTATIVE_ADDRESS  VARCHAR2(500 BYTE),
  REPRESENTATIVE_PHONE    VARCHAR2(50 BYTE),
  PRIMARY KEY
 (REPRESENTATIVE_KEY)
)

CREATE TABLE YOUSSEF.DATE_DIM
(
  DATE_KEY    NUMBER,
  DAY_NUM     NUMBER,
  DAY_NAME    VARCHAR2(36 BYTE),
  MONTH_NUM   NUMBER,
  MONTH_NAME  VARCHAR2(36 BYTE),
  YEAR        NUMBER,
  QUARTER     VARCHAR2(7 BYTE),
  CONSTRAINT DATE_DIM_PK
 PRIMARY KEY
 (DATE_KEY)
)

CREATE TABLE YOUSSEF.FAREBASIS_DIM
(
  FAREBASIS_KEY   INTEGER,
  FAREBASIS_ID    VARCHAR2(1 BYTE),
  FAREBASIS_DESC  VARCHAR2(150 BYTE),
  FARE_TYPE       VARCHAR2(20 BYTE),
  PRIMARY KEY
 (FAREBASIS_KEY)
)

CREATE TABLE YOUSSEF.FLIGHT_ACTIVITY_FACT
(
  FLIGHT_KEY          INTEGER,
  CLASS_KEY           INTEGER,
  MEMBERSHIP_KEY      INTEGER,
  CHANNEL_KEY         INTEGER,
  DATE_KEY            INTEGER,
  FLYER_KEY           INTEGER,
  REVENUE             INTEGER,
  COST                INTEGER,
  FLYER_MILES_GAINED  INTEGER,
  OVERNIGHT_DURATION  INTERVAL DAY(2) TO SECOND(6),
  FAREBASIS_KEY       INTEGER,
  FOREIGN KEY (FLIGHT_KEY) 
 REFERENCES YOUSSEF.FLIGHT_DIM (FLIGHT_KEY),
  FOREIGN KEY (CLASS_KEY) 
 REFERENCES YOUSSEF.CLASS_OF_SERVICE_DIM (CLASS_KEY),
  FOREIGN KEY (MEMBERSHIP_KEY) 
 REFERENCES YOUSSEF.MEMBERSHIP_DIM (MEMBERSHIP_KEY),
  FOREIGN KEY (CHANNEL_KEY) 
 REFERENCES YOUSSEF.CHANNEL_DIM (CHANNEL_KEY),
  FOREIGN KEY (DATE_KEY) 
 REFERENCES YOUSSEF.DATE_DIM (DATE_KEY),
  FOREIGN KEY (FLYER_KEY) 
 REFERENCES YOUSSEF.FLYERS_DIM (FLYER_KEY)
)

CREATE TABLE YOUSSEF.FLIGHT_DIM
(
  FLIGHT_KEY           NUMBER,
  FLIGHT_ID            NUMBER,
  FLIGHT_SOURCE        VARCHAR2(250 BYTE),
  FLIGHT_DESTINATION   VARCHAR2(50 BYTE),
  FLIGHT_DURATION      INTERVAL DAY(2) TO SECOND(6),
  OVER_NIGHT_DURATION  INTERVAL DAY(2) TO SECOND(6),
  FLIGHT_DISTANCE      INTEGER,
  PRIMARY KEY
 (FLIGHT_KEY)
)

CREATE TABLE YOUSSEF.FLYER_MILES_REDEMPTION_FACT
(
  FLYER_KEY       NUMBER                        NOT NULL,
  DATE_KEY        NUMBER                        NOT NULL,
  ITEM_KEY        NUMBER                        NOT NULL,
  TRANSACTION_NO  NUMBER,
  FOREIGN KEY (FLYER_KEY) 
 REFERENCES YOUSSEF.FLYERS_DIM (FLYER_KEY),
  FOREIGN KEY (DATE_KEY) 
 REFERENCES YOUSSEF.DATE_DIM (DATE_KEY),
  FOREIGN KEY (ITEM_KEY) 
 REFERENCES YOUSSEF.REDEMPTION_ITEMS_DIM (ITEM_KEY)
)

CREATE TABLE YOUSSEF.FLYER_PROMOTIONS_FACT
(
  FLYER_KEY         NUMBER                      NOT NULL,
  DATE_KEY          NUMBER                      NOT NULL,
  PROMOTION_KEY     NUMBER                      NOT NULL,
  PROMOTIONS_COUNT  NUMBER,
  FOREIGN KEY (FLYER_KEY) 
 REFERENCES YOUSSEF.FLYERS_DIM (FLYER_KEY),
  FOREIGN KEY (DATE_KEY) 
 REFERENCES YOUSSEF.DATE_DIM (DATE_KEY),
  FOREIGN KEY (PROMOTION_KEY) 
 REFERENCES YOUSSEF.PROMOTION_DIM (PROMOTION_KEY)
)

CREATE TABLE YOUSSEF.FLYERS_DIM
(
  FLYER_KEY      NUMBER,
  FLYER_ADDRESS  VARCHAR2(255 BYTE),
  FLYER_ID       NUMBER,
  FLYER_NAME     VARCHAR2(255 BYTE),
  FLYER_PHONE    VARCHAR2(255 BYTE),
  FLYER_GENDER   VARCHAR2(255 BYTE),
  FLYER_DOB      DATE,
  PRIMARY KEY
 (FLYER_KEY)
)

CREATE TABLE YOUSSEF.INTERACTION_TYPE_DIM
(
  INTERACTION_KEY   NUMBER,
  INTERACTION_TYPE  VARCHAR2(255 BYTE),
  INTERACTION_ID    NUMBER,
  PRIMARY KEY
 (INTERACTION_KEY)
)

CREATE TABLE YOUSSEF.MEMBERSHIP_DIM
(
  MEMBERSHIP_KEY    NUMBER,
  MEMBERSHIP_ID     NUMBER,
  MEMBERSHIP_TYPE   VARCHAR2(250 BYTE),
  ACTIVATION_MILES  NUMBER,
  PRIMARY KEY
 (MEMBERSHIP_KEY)
)

CREATE TABLE YOUSSEF.PROMOTION_DIM
(
  PROMOTION_KEY   NUMBER,
  PROMOTION_NAME  VARCHAR2(255 BYTE),
  PROMOTION_ID    NUMBER,
  PROMOTION_DESC  VARCHAR2(255 BYTE),
  DISCOUNT_PCT    NUMBER(3,2),
  PRIMARY KEY
 (PROMOTION_KEY)
)

CREATE TABLE YOUSSEF.REDEMPTION_ITEMS_DIM
(
  ITEM_KEY               NUMBER(10),
  ITEM_DESC              VARCHAR2(150 BYTE),
  ITEM_TERMS_CONDITIONS  VARCHAR2(1000 BYTE),
  ITEM_MILES_PRICE       NUMBER(10),
  ITEM_ID                INTEGER,
  PRIMARY KEY
 (ITEM_KEY)
)

CREATE TABLE YOUSSEF.REPORT_DIM
(
  REPORT_KEY       NUMBER,
  REPORT_TYPE      VARCHAR2(255 BYTE),
  REPORT_ID        NUMBER,
  REPORT_DESC      VARCHAR2(255 BYTE),
  REPORT_CAUSE     VARCHAR2(255 BYTE),
  REPORT_SEVERITY  VARCHAR2(255 BYTE),
  PRIMARY KEY
 (REPORT_KEY)
)